# ğŸ“˜ JavaScript Cheat Sheet: Event Loop & Task Queues

## ğŸ§  What is the **Event Loop**?

> ğŸ” The **Event Loop** is the mechanism that allows JavaScript (single-threaded) to handle asynchronous tasks **non-blockingly**.

It continuously:

1. Executes **synchronous code** (in the call stack).
2. Then handles **microtasks**.
3. Then handles **macrotasks** (a.k.a. tasks).

---

## ğŸ§¾ Order of Execution

```txt
1ï¸âƒ£ Call Stack (sync code)
2ï¸âƒ£ Microtasks Queue (e.g., Promise callbacks, queueMicrotask)
3ï¸âƒ£ Macrotasks Queue (e.g., setTimeout, setInterval, setImmediate)
```

> ğŸ§ª Rule: **Microtasks are always executed before macrotasks.**

---

## ğŸ”‚ Flow Diagram

```txt
[Call Stack Empty?]
    â†“
[Process Microtasks]
    â†“
[Process One Macrotask]
    â†“
[Repeat Event Loop]
```

---

## ğŸ“¦ Microtasks vs Macrotasks

| Feature        | Microtasks ğŸ§¬                                        | Macrotasks ğŸ•’                                                        |
| -------------- | ---------------------------------------------------- | -------------------------------------------------------------------- |
| Executed when? | Immediately after call stack is empty                | In the next event loop tick                                          |
| Examples       | `Promise.then`, `catch`, `finally`, `queueMicrotask` | `setTimeout`, `setInterval`, `setImmediate`, `requestAnimationFrame` |
| Priority       | â¬† Higher priority                                    | â¬‡ Lower priority                                                     |

---

## ğŸ§ª Example to Remember the Flow

```js
console.log('1');

setTimeout(() => console.log('2'), 0);

Promise.resolve().then(() => console.log('3'));

console.log('4');
```

**Output:**

```
1
4
3 âœ… (microtask)
2 âœ… (macrotask)
```

---

## ğŸ¯ Common Interview Questions

â“ What happens if you queue a microtask inside a microtask?
âœ”ï¸ Itâ€™s added to the **same microtask queue**, and **runs before the next macrotask**.

```js
Promise.resolve().then(() => {
  console.log('A');
  Promise.resolve().then(() => console.log('B'));
});
```

**Output:** A â†’ B

---

## ğŸ› ï¸ Tips

* Microtasks can **starve** macrotasks if added recursively â€” beware of infinite microtask loops!
* Always visualize the **queue order** before answering output-based questions.

---

âœ… **Pro Tip:**
If asked to explain how JavaScript handles async code, use this line:

> â€œJavaScript uses an event loop which prioritizes microtasks over macrotasks after executing all synchronous code.â€